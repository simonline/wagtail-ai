(()=>{"use strict";var e={465:(e,t,n)=>{n.r(t)},690:function(e,t,n){var r,a=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var a=Object.getOwnPropertyDescriptor(t,n);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,a)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return i(t,e),t},u=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{u(r.next(e))}catch(e){o(e)}}function l(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}u((r=r.apply(e,t||[])).next())}))},c=this&&this.__generator||function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(l){return function(u){return function(l){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,l[0]&&(i=0)),i;)try{if(n=1,r&&(a=2&l[0]?r.return:l[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,l[1])).done)return a;switch(r=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,r=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==l[0]&&2!==l[0])){i=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){i.label=l[1];break}if(6===l[0]&&i.label<a[1]){i.label=a[1],a=l;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(l);break}a[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(e){l=[6,e],r=0}finally{n=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,u])}}};t.__esModule=!0;var s=l(n(363)),f=n(603),d=n(3),p=n(533),h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t}(Error),m=["Processing your query, please wait...","Analyzing your input, just a moment...","Generating a response, hold on...","Thinking, thinking, thinking...","Fetching data, almost there...","Compiling information, please wait...","Crunching numbers, please be patient...","Analyzing data, loading...","Preparing response, please wait...","Interpreting your message, loading..."];function y(){var e=m[Math.floor(Math.random()*m.length)];return s.default.createElement("div",{className:"Draftail-AI-LoadingOverlay"},s.default.createElement("span",null,s.default.createElement("svg",{className:"icon icon-spinner c-spinner","aria-hidden":"true"},s.default.createElement("use",{href:"#icon-spinner"})),e))}function g(){return s.default.createElement("svg",{width:"16",height:"16",className:"Draftail-Icon","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 576 512"},s.default.createElement("path",{d:"M234.7 42.7L197 56.8c-3 1.1-5 4-5 7.2s2 6.1 5 7.2l37.7 14.1L248.8 123c1.1 3 4 5 7.2 5s6.1-2 7.2-5l14.1-37.7L315 71.2c3-1.1 5-4 5-7.2s-2-6.1-5-7.2L277.3 42.7 263.2 5c-1.1-3-4-5-7.2-5s-6.1 2-7.2 5L234.7 42.7zM46.1 395.4c-18.7 18.7-18.7 49.1 0 67.9l34.6 34.6c18.7 18.7 49.1 18.7 67.9 0L529.9 116.5c18.7-18.7 18.7-49.1 0-67.9L495.3 14.1c-18.7-18.7-49.1-18.7-67.9 0L46.1 395.4zM484.6 82.6l-105 105-23.3-23.3 105-105 23.3 23.3zM7.5 117.2C3 118.9 0 123.2 0 128s3 9.1 7.5 10.8L64 160l21.2 56.5c1.7 4.5 6 7.5 10.8 7.5s9.1-3 10.8-7.5L128 160l56.5-21.2c4.5-1.7 7.5-6 7.5-10.8s-3-9.1-7.5-10.8L128 96 106.8 39.5C105.1 35 100.8 32 96 32s-9.1 3-10.8 7.5L64 96 7.5 117.2zm352 256c-4.5 1.7-7.5 6-7.5 10.8s3 9.1 7.5 10.8L416 416l21.2 56.5c1.7 4.5 6 7.5 10.8 7.5s9.1-3 10.8-7.5L480 416l56.5-21.2c4.5-1.7 7.5-6 7.5-10.8s-3-9.1-7.5-10.8L480 352l-21.2-56.5c-1.7-4.5-6-7.5-10.8-7.5s-9.1 3-10.8 7.5L416 352l-56.5 21.2z"}))}var v=function(e,t){return u(void 0,void 0,void 0,(function(){var n,r,a,o;return c(this,(function(i){switch(i.label){case 0:(n=new FormData).append("text",e),n.append("prompt",t.id),i.label=1;case 1:return i.trys.push([1,4,,5]),[4,fetch("/admin/ai/process/",{method:"POST",body:n})];case 2:return[4,(r=i.sent()).json()];case 3:if(a=i.sent(),r.ok)return[2,a.message];throw new h(a.error);case 4:throw o=i.sent(),console.log("here"),new h(o.message);case 5:return[2]}}))}))},b=function(e,t){var n=f.RichUtils.insertSoftNewline(f.EditorState.moveSelectionToEnd(e)),r=n.getCurrentContent(),a=f.Modifier.replaceText(r,f.EditorState.moveSelectionToEnd(n).getSelection(),t);return f.EditorState.push(n,a,"insert-characters")},w=function(e,t){var n=e.getCurrentContent(),r=f.Modifier.replaceText(n,function(e){var t=e.getBlockMap();return new f.SelectionState({anchorKey:t.first().getKey(),anchorOffset:0,focusKey:t.last().getKey(),focusOffset:t.last().getLength()})}(n),t);return f.EditorState.push(e,r,"insert-characters")},_=function(e,t,n){return u(void 0,void 0,void 0,(function(){var r,a,o;return c(this,(function(i){switch(i.label){case 0:return r=e.getCurrentContent(),a=r.getPlainText(),[4,v(a,t)];case 1:return o=i.sent(),[2,n(e,o)]}}))}))};function E(e){var t=e.onAction;return s.default.createElement("div",{className:"Draftail-AI-ButtonDropdown"},window.WAGTAIL_AI_PROMPTS.map((function(e){return s.default.createElement("button",{type:"button",onMouseDown:function(){return t(e)}},s.default.createElement("span",null,e.label)," ",e.description)})))}function S(){return s.default.createElement(d.Icon,{icon:s.default.createElement(g,null)})}t.default=function(e){var t=this,n=e.getEditorState,r=e.onChange,a=e.field,o=n(),i=(0,s.useState)(!1),l=i[0],f=i[1],h=(0,s.useState)(!1),m=h[0],g=h[1],v=(0,s.useState)(null),O=v[0],x=v[1];return s.default.createElement(s.default.Fragment,null,s.default.createElement(d.ToolbarButton,{name:"AI Tools",icon:s.default.createElement(S,null),onClick:function(){g(!m)}}),m?s.default.createElement(E,{onAction:function(e){return u(t,void 0,void 0,(function(){var t,n,a;return c(this,(function(i){switch(i.label){case 0:x(null),g(!1),f(!0),i.label=1;case 1:return i.trys.push([1,6,,7]),"append"!==e.method?[3,3]:(t=r,[4,_(o,e,b)]);case 2:return t.apply(void 0,[i.sent()]),[3,5];case 3:return n=r,[4,_(o,e,w)];case 4:n.apply(void 0,[i.sent()]),i.label=5;case 5:return[3,7];case 6:return a=i.sent(),x(a.message),[3,7];case 7:return f(!1),[2]}}))}))}}):null,O?(0,p.createPortal)(s.default.createElement(s.default.Fragment,null,s.default.createElement("svg",{className:"icon icon-warning w-field__errors-icon","aria-hidden":"true"},s.default.createElement("use",{href:"#icon-warning"})),s.default.createElement("p",{className:"error-message"},O)),a.parentNode.previousElementSibling):null,l?(0,p.createPortal)(s.default.createElement(y,null),a.parentNode):null)}},42:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},r.apply(this,arguments)},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};t.__esModule=!0,n(465);var o=a(n(690)),i=a(n(363)),l={type:"inline",label:"AI Completion",inline:o.default},u=new Proxy(window.draftail.initEditor,{apply:function(e,t,n){var a=n[0],u=n[2],c=(u?u.parentNode:document.body).querySelector(a)||document.body.querySelector(a);return l.inline=function(e){return i.default.createElement(o.default,r({field:c},e))},n[1].controls=[l],Reflect.apply(e,t,n)}});window.draftail.initEditor=u},603:e=>{e.exports=DraftJS},3:e=>{e.exports=Draftail},363:e=>{e.exports=React},533:e=>{e.exports=ReactDOM}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,n),o.exports}n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n(42)})();